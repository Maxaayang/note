虚拟内存的重要能力：
* 将主存看成是一个存储在地址空间的高速缓存，在主存中只保存活动区域，并根据需要在磁盘和主存之间来回传送数据，通过这种方式，高效地保存了主存。
* 为每个进程提供了一致的地址空间，从而简化了内存管理。
* 保护了每个进程的地址空间不被其他进程破坏。

### 物理和虚拟寻址
计算机系统的内存被组织成一个由*M*个连续的字节大小的单元组成的数组，每字节都有一个唯一的物理地址。

**物理寻址**
CPU 执行一条命令时，会生成一个有效的物理地址，通过内存总线，把它传递给主存。主存从物理地址处取出开始的 4 字节，并将它返回给 CPU，CPU 将它存放在一个寄存器里。
![image.png](https://s2.loli.net/2021/12/19/hkz9p1l45wC6RLj.png)

**虚拟寻址**
CPU 芯片上的专用硬件内存管理单元(MMU)，利用存放在主存中的*查询表*来动态翻译虚拟地址，该表的内容由操作系统管理。
![image.png](https://s2.loli.net/2021/12/19/MKrpIO6QvDlaYHN.png)

### 地址空间
**地址空间**是一个非负整数地址的有序集合，如果整数是连续的，就为**线性地址空间**
**虚拟地址空间**是CPU的一个有 N=2^n 个地址的地址空间生产虚拟地址的空间。
**物理地址空间**对应于系统中物理内存的 M 个字节。M 不要求是 2 的幂。

虚拟地址的基本思想：每个数据有多个独立的地址，其中每个地址都选自一个不同的地址空间。
主存中的每个字节都有一个选自虚拟地址空间的虚拟地址和一个选自物理地址空间的物理地址。

















