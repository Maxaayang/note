fork 函数复制当前进程，在内核进程表中创建一个新的进程表项。新的进程表项有很多属性和原进程相同，例如堆指针、栈指针和标志寄存器的值。
子进程的代码与父进程完全相同，但是数据的复制是==写时复制==（先是缺页中断，然后操作系统给子进程分配内存并复制父进程的数据）
创建子进程后，父进程中打开的文件描述符默认在子进程中也是打开的，且文件描述符的引用计数加1，父进程的用户根目录、当前目录等变量的引用计数均会加1.

僵尸态：
* 子进程结束运行之后，父进程读取其退出状态之前（因为父进程一般需要跟踪子进程的退出状态，所以当子进程结束运行时，内核不会立即释放该进程的进程表表项，以满足父进程后续对该子进程退出信息的查询）
* 父进程结束或者异常终止，而子进程继续运行（此时子进程将被init进程接管）

**wait和waitpid的区别**
wait：令调用者阻塞，直到该进程的某个子进程结束运行为止，返回结束运行的子进程的PID。
waitpid：可以通过设置一个选项来设置非阻塞，并且不是等待第一个结束的进程而是等待参数中pid指定的进程。





